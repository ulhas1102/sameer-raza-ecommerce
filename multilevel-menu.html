<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Step-by-Step Mobile Menu</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #fff;
    }

    #toggle-menu {
      padding: 10px 20px;
      font-size: 18px;
    }

    .menu-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 30%;
      height: 100%;
      background: #fff;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      overflow: hidden;
      z-index: 9999;
      display: flex;
    }

    .menu-container.active {
      transform: translateX(0);
    }

    .menu-wrapper {
      display: flex;
      transition: transform 0.3s ease;
      width: 300%; /* 3 levels */
    }

    .menu-panel {
      width: 100%;
      flex-shrink: 0;
      background: #ffffff;
      overflow-y: auto;
    }

    .menu-header {
      display: flex;
      align-items: center;
      padding: 15px;
      background: #f8f9fa;
      border-bottom: 1px solid #ddd;
    }

    .menu-header .back-btn,
    .menu-header .close-btn {
      background: none;
      border: none;
      font-size: 18px;
      margin-right: 10px;
      cursor: pointer;
    }

    .menu-header-title {
      font-size: 18px;
      font-weight: bold;
    }

    .menu {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .menu li a {
      display: block;
      padding: 15px;
      border-bottom: 1px solid #ddd;
      text-decoration: none;
      color: #333;
    }

    .menu li a:hover {
      background: #007bff;
      color: #fff;
    }

    .has-submenu::after {
      content: "\f105";
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      float: right;
    }

    @media (max-width: 1024px) {
      .menu-container {
        width: 100%;
      }
    }
  </style>
</head>

<body>

  <button id="toggle-menu"><i class="fas fa-bars"></i> Menu</button>

  <div class="menu-container" id="menu-container">
    <div class="menu-wrapper" id="menu-wrapper">

      <!-- Main Menu -->
      <div class="menu-panel" id="menu-main">
        <div class="menu-header">
          <button class="close-btn" id="close-menu"><i class="fas fa-times"></i></button>
          <div class="menu-header-title">Menu</div>
        </div>
        <ul class="menu">
          <li><a href="#" class="has-submenu" data-target="menu-shop">Shop</a></li>
        </ul>
      </div>

      <!-- Shop Submenu -->
      <div class="menu-panel" id="menu-shop">
        <div class="menu-header">
          <button class="back-btn" data-target="menu-main"><i class="fas fa-arrow-left"></i></button>
          <div class="menu-header-title">Shop</div>
        </div>
        <ul class="menu">
          <li><a href="#">Products</a></li>
          <li><a href="#" class="has-submenu" data-target="menu-collections">Collections</a></li>
          <li><a href="#" class="has-submenu" data-target="menu-accessories">Accessories</a></li>
          <li><a href="#">Cards</a></li>
          <li><a href="#" class="has-submenu" data-target="menu-sets">Sets</a></li>
        </ul>
      </div>

      <!-- Collections Submenu -->
      <div class="menu-panel" id="menu-collections">
        <div class="menu-header">
          <button class="back-btn" data-target="menu-shop"><i class="fas fa-arrow-left"></i></button>
          <div class="menu-header-title">Collections</div>
        </div>
        <ul class="menu">
          <li><a href="#">Premium</a></li>
          <li><a href="#">Common</a></li>
          <li><a href="#">Exclusive</a></li>
          <li><a href="#">Other</a></li>
        </ul>
      </div>

    </div>
  </div>

  <script>
    const menuContainer = document.getElementById('menu-container');
    const menuWrapper = document.getElementById('menu-wrapper');
    const toggleMenu = document.getElementById('toggle-menu');
    const closeMenu = document.getElementById('close-menu');
    const submenuLinks = document.querySelectorAll('.has-submenu');
    const backButtons = document.querySelectorAll('.back-btn');

    let currentStep = 0;

    // Open the menu
    toggleMenu.addEventListener('click', () => {
      menuContainer.classList.add('active');
      menuWrapper.style.transform = `translateX(0%)`;
      currentStep = 0;
    });

    // Close the menu
    closeMenu.addEventListener('click', () => {
      menuContainer.classList.remove('active');
      currentStep = 0;
    });

    // Submenu navigation
    submenuLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetMenu = document.getElementById(link.dataset.target);
        menuWrapper.style.transform = `translateX(-${100 * (++currentStep)}%)`;
      });
    });

    // Back button functionality
    backButtons.forEach(button => {
      button.addEventListener('click', () => {
        if (currentStep > 0) {
          currentStep--;
          menuWrapper.style.transform = `translateX(-${100 * currentStep}%)`;
        }
      });
    });

    // Click outside to close
    document.addEventListener('click', function (event) {
      if (!menuContainer.contains(event.target) && !toggleMenu.contains(event.target)) {
        menuContainer.classList.remove('active');
        currentStep = 0;
      }
    });
  </script>

</body>

</html>
